// src/pages/DashboardSocial.tsx
import { useState, useEffect, useCallback } from "react";
import { motion, AnimatePresence } from "framer-motion";
import {
  ChevronRight,
  Share2,
  Link as LinkIcon,
  X,
  AlertCircle,
  CheckCircle,
  Trash2,
  Edit3,
  Plus,
  GripVertical,
  ExternalLink,
  RefreshCw,
  Loader2,
  Copy,
  Check,
} from "lucide-react";
import { linkService } from "../../services/linkService";
import { 
  detectSocialNetwork, 
  isSocialNetworkUrl,
  getSocialNetworkName 
} from "../../utils/socialUtils";
import { 
  isValidUrl, 
  normalizeUrl, 
  extractDomainInfo 
} from "../../utils/linkUtils";
import type { UserLinkResponse } from "../../types/links.types";

// ═══════════════════════════════════════════════════════════
// IMPORTAR TODOS OS ÍCONES QUE VOCÊ JÁ TEM
// ═══════════════════════════════════════════════════════════


// ═══════════════════════════════════════════════════════════
// TIPOS
// ═══════════════════════════════════════════════════════════

interface SocialNetwork {
  id: string;
  name: string;
  icon: React.ReactNode;
  color: string;
  placeholder: string;
}

interface UserSocialNetwork {
  id: string;
  networkId: string;
  url: string;
}

// ═══════════════════════════════════════════════════════════
// DEFINIÇÃO DAS REDES SOCIAIS (seu array existente)
// ═══════════════════════════════════════════════════════════


const InstagramIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5">
    <defs>
      <linearGradient id="instagram-gradient" x1="0%" y1="100%" x2="100%" y2="0%">
        <stop offset="0%" stopColor="#FFDC80" />
        <stop offset="25%" stopColor="#F77737" />
        <stop offset="50%" stopColor="#E1306C" />
        <stop offset="75%" stopColor="#C13584" />
        <stop offset="100%" stopColor="#833AB4" />
      </linearGradient>
    </defs>
    <path fill="url(#instagram-gradient)" d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </svg>
);

const SnapchatIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#FFFC00">
    <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/>
  </svg>
);

const YouTubeIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#FF0000">
    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
  </svg>
);

const DiscordIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#5865F2">
    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
  </svg>
);

const FacebookIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#1877F2">
    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
  </svg>
);

const TwitterIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
  </svg>
);

const TikTokIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
  </svg>
);

const LastFmIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#D51007">
    <path d="M10.584 17.21l-.88-2.392s-1.43 1.594-3.573 1.594c-1.897 0-3.244-1.649-3.244-4.288 0-3.381 1.704-4.591 3.381-4.591 2.42 0 3.189 1.567 3.849 3.574l.88 2.749c.88 2.666 2.529 4.81 7.285 4.81 3.409 0 5.718-1.044 5.718-3.793 0-2.227-1.265-3.381-3.63-3.931l-1.758-.385c-1.21-.275-1.567-.77-1.567-1.594 0-.935.742-1.484 1.952-1.484 1.32 0 2.034.495 2.144 1.677l2.749-.33c-.22-2.474-1.924-3.492-4.729-3.492-2.474 0-4.893.935-4.893 3.932 0 1.87.907 3.051 3.189 3.601l1.87.44c1.402.33 1.869.825 1.869 1.677 0 1.044-1.016 1.456-2.914 1.456-2.831 0-4.014-1.484-4.674-3.52l-.907-2.749c-1.155-3.574-2.997-4.894-6.653-4.894C2.144 5.333 0 7.89 0 12.233c0 4.18 2.144 6.434 5.993 6.434 3.106 0 4.591-1.457 4.591-1.457z"/>
  </svg>
);

const SteamIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"/>
  </svg>
);

const GitHubIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#181717">
    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
  </svg>
);

const SpotifyIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#1DB954">
    <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
  </svg>
);

const TwitchIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#9146FF">
    <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
  </svg>
);

const SoundcloudIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#FF5500">
    <path d="M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.052-.1-.101-.1m-.899.828c-.06 0-.091.037-.104.094L0 14.479l.165 1.308c.014.057.045.094.09.094s.089-.037.099-.094l.195-1.308-.195-1.332c.01-.057-.04-.094-.09-.094m1.83-1.229c-.061 0-.12.045-.12.104l-.21 2.563.225 2.458c0 .06.045.104.106.104.061 0 .12-.044.12-.104l.24-2.458-.24-2.563c0-.06-.059-.104-.12-.104m.945-.089c-.075 0-.135.06-.15.135l-.193 2.64.21 2.544c.016.077.075.138.149.138.075 0 .135-.061.15-.138l.24-2.544-.24-2.64c-.015-.075-.075-.135-.15-.135m1.065.202c-.09 0-.166.075-.18.165l-.18 2.46.195 2.48c.015.09.091.164.18.164.091 0 .166-.074.181-.164l.21-2.48-.21-2.46c-.016-.09-.091-.165-.181-.165m.96-.285c-.105 0-.195.09-.195.195l-.165 2.535.18 2.46c0 .104.09.194.195.194s.195-.089.195-.194l.195-2.46-.195-2.535c0-.104-.09-.195-.195-.195m1.035-.105c-.12 0-.225.104-.225.225l-.15 2.415.165 2.43c0 .12.104.224.225.224.12 0 .224-.104.224-.224l.18-2.43-.18-2.415c0-.12-.104-.225-.225-.225m1.095-.195c-.135 0-.255.12-.27.255L6.9 14.145l.15 2.4c.016.135.136.255.271.255s.255-.12.27-.255l.166-2.4-.165-2.64c-.015-.135-.135-.255-.27-.255m1.17-.135c-.15 0-.285.135-.285.285l-.135 2.565.135 2.37c0 .15.135.285.285.285.15 0 .285-.135.285-.285l.15-2.37-.15-2.565c0-.15-.135-.285-.285-.285"/>
    <path d="M12.075 9.5c-.165 0-.315.149-.315.314l-.12 4.23.12 2.34c0 .166.15.315.315.315.165 0 .315-.149.315-.315l.135-2.34-.135-4.229c0-.166-.15-.315-.315-.315m1.155-.135c-.195 0-.345.149-.345.344l-.105 4.365.105 2.31c0 .195.15.345.345.345.195 0 .344-.15.344-.345l.12-2.31-.12-4.364c0-.196-.149-.345-.344-.345m1.155-.165c-.21 0-.375.165-.375.375l-.09 4.425.09 2.28c0 .21.165.375.375.375s.375-.165.375-.375l.105-2.28-.105-4.425c0-.21-.165-.375-.375-.375m1.2-.15c-.225 0-.405.179-.405.404l-.075 4.471.075 2.235c0 .225.18.405.405.405s.404-.18.404-.405l.09-2.235-.09-4.471c0-.225-.18-.404-.405-.404m1.185-.09c-.24 0-.435.195-.435.435l-.06 4.456.06 2.19c0 .24.195.435.435.435s.434-.195.434-.435l.076-2.19-.076-4.456c0-.24-.195-.435-.435-.435m1.14-.045c-.255 0-.45.196-.45.45L17.4 14.13l.06 2.145c0 .255.195.45.45.45s.45-.195.45-.45l.075-2.145-.075-4.575c0-.255-.195-.45-.45-.45m1.35-.045c-.27 0-.494.225-.494.495l-.046 4.575.046 2.1c0 .27.225.495.495.495s.494-.225.494-.495l.061-2.1-.061-4.575c0-.27-.225-.495-.494-.495M21.705 9c-.285 0-.51.224-.51.51l-.03 4.62.03 2.04c0 .285.225.51.51.51.285 0 .51-.225.51-.51l.045-2.04-.045-4.62c0-.285-.225-.51-.51-.51m1.155.135c-.3 0-.539.24-.539.54v6.57c0 .3.24.54.54.54.3 0 .539-.24.539-.54V9.675c0-.3-.24-.54-.54-.54"/>
  </svg>
);

const WhatsappIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#25D366">
    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
  </svg>
);

const TelegramIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#26A5E4">
    <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
  </svg>
);

const BattleNetIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#00AEFF">
    <path d="M10.457 0c-.37.018-.734.14-1.062.377C8.19 1.26 7.91 3.153 8.16 5.63a21.09 21.09 0 00-3.907 2.321c-.192-.403-.503-.896-.926-1.238-.91-.736-1.992-.645-2.853.083-.795.672-1.089 1.715-.803 2.853.265 1.057.918 2.195 1.848 3.283-1.11 2.025-1.616 3.874-1.449 5.33.148 1.291.808 2.34 1.89 2.975 1.505.883 3.467.646 5.634-.54.28.257.567.51.864.758.263 1.1.582 1.88 1.059 2.35a2.147 2.147 0 001.571.643c.67-.014 1.26-.322 1.69-.781.67-.716.894-1.782.689-2.96a21.063 21.063 0 003.063-2.037c.314.522.782 1.065 1.327 1.417.935.605 2.01.574 2.903-.108.825-.63 1.196-1.65.996-2.8-.186-1.066-.76-2.223-1.627-3.346 1.025-1.903 1.494-3.639 1.382-5.012-.096-1.18-.608-2.162-1.49-2.807-.864-.632-1.974-.847-3.157-.66-1.02.161-2.104.578-3.218 1.206a21.197 21.197 0 00-3.243-2.208c-.148-1.105-.418-1.93-.872-2.454A2.147 2.147 0 0010.457 0zm-.097 1.096c.237.012.436.099.592.264.286.303.486.848.595 1.62A19.233 19.233 0 008.23 1.68c.702-.405 1.454-.612 2.13-.584zm3.855 1.68c.868-.008 1.593.169 2.128.56.568.415.92 1.054.987 1.866.085 1.043-.247 2.376-.943 3.877a19.195 19.195 0 00-2.8-2.939c.456-.875.727-1.648.77-2.281.025-.373-.033-.656-.146-.835a.4.4 0 00-.34-.2c-.354-.005-.869.316-1.467.91a21.141 21.141 0 00-1.351-.947c1.067-.623 2.063-1 2.936-1.009h.226zm-9.1 3.324c.267 0 .527.109.776.331.21.188.403.447.574.77a19.181 19.181 0 00-.61 4.047c-1.135-1.202-1.87-2.4-2.105-3.337-.159-.632-.089-1.17.179-1.397.164-.139.37-.27.723-.36a1.63 1.63 0 01.463-.054zm11.78 1.012c.2.004.371.051.502.155.227.18.367.505.4.945.049.64-.129 1.426-.508 2.294a19.168 19.168 0 00-3.575-2.09c.989-.622 1.887-.995 2.594-1.228.25-.08.436-.08.587-.076zM12 7.674a17.162 17.162 0 014.437 3.886A17.162 17.162 0 0112 16.3a17.162 17.162 0 01-4.434-4.74A17.163 17.163 0 0112 7.674zm-7.748.847a21.13 21.13 0 001.417 1.377 19.182 19.182 0 00.694 4.066c-1.337-.706-2.321-1.554-2.837-2.399-.32-.525-.433-.996-.37-1.343.053-.287.227-.534.584-.715.171-.09.339-.092.512.014zm13.236 3.31c.204.01.356.082.441.235.148.265.147.722-.019 1.295a19.2 19.2 0 00-2.965 2.463 21.15 21.15 0 001.135-1.664c.455-1.014.604-1.859.447-2.264a.254.254 0 00-.22-.134c-.27-.016-.713.238-1.262.716a21.191 21.191 0 00-.94 1.385 19.2 19.2 0 00-3.856 1.692 19.164 19.164 0 001.885-3.678 19.18 19.18 0 004.079.59l-.012-.01a21.058 21.058 0 001.287-.632zm-12.01.604a19.198 19.198 0 002.084 3.088c-.919.485-1.69.731-2.265.692-.339-.023-.573-.128-.706-.315-.216-.304-.255-.841-.104-1.54.09-.419.266-.883.505-1.381.16-.147.324-.358.486-.544zM3.17 13.04a21.078 21.078 0 00-.418.742c-.49.929-.773 1.822-.827 2.596-.06.86.175 1.56.718 2.029.47.405 1.123.567 1.89.488a19.155 19.155 0 01-.755-3.942 7.09 7.09 0 01-.608-1.913zm17.63.052a21.06 21.06 0 00.24.567c.514 1.184.746 2.24.649 3.021-.068.545-.29.922-.68 1.142-.584.331-1.504.224-2.589-.28a19.183 19.183 0 001.624-3.317 6.915 6.915 0 00.756-1.133zm-6.912 4.324a19.192 19.192 0 00.635 3.278c-.513.292-.977.454-1.365.475-.285.015-.493-.05-.62-.18-.206-.213-.306-.657-.285-1.28.013-.376.074-.807.181-1.28a21.182 21.182 0 001.454-1.013zm2.44 1.193c-.09.518-.201 1.011-.333 1.469-.227.784-.503 1.382-.829 1.749-.271.306-.576.45-.907.458-.496.011-1-.282-1.454-.83a19.247 19.247 0 003.523-2.846z"/>
  </svg>
);

const LinkedinIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#0A66C2">
    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
  </svg>
);

const PayPalIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#003087">
    <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.59 3.025-2.566 6.082-8.558 6.082H9.83c-.523 0-.967.382-1.05.9l-1.32 8.377c-.06.387.233.733.626.733h3.177c.523 0 .967-.383 1.05-.9l.826-5.238a1.073 1.073 0 0 1 1.05-.901h.977c4.144 0 7.25-1.68 8.056-6.54.337-2.055.06-3.533-.999-4.426z"/>
  </svg>
);

const XboxIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#107C10">
    <path d="M4.102 21.033C6.211 22.881 8.977 24 12 24c3.026 0 5.789-1.119 7.902-2.967 1.877-1.912-4.316-8.709-7.902-11.417-3.582 2.708-9.779 9.505-7.898 11.417zm11.16-15.768c1.738-1.672 3.287-2.746 4.199-3.024C17.379.893 14.777 0 12 0 9.255 0 6.68.867 4.578 2.193c.927.246 2.527 1.31 4.314 3.021.324.315.649.64.972.974.307-.325.62-.64.939-.945.365-.352.734-.694 1.11-1.021.378.334.753.682 1.123 1.041zm-3.012 3.059c-.758-.738-1.597-1.47-2.469-2.163-2.226 2.174-4.923 5.57-5.166 8.252-.253 2.775.678 4.089.803 4.274-.04-.044-.062-.09-.063-.09 0 0 3.034-4.278 6.895-10.273zm1.5 0c3.86 5.995 6.895 10.273 6.895 10.273 0 0-.023.046-.063.09.125-.185 1.056-1.499.803-4.274-.243-2.682-2.94-6.078-5.166-8.252-.872.693-1.71 1.425-2.469 2.163z"/>
  </svg>
);

const PinterestIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#BD081C">
    <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/>
  </svg>
);

const LetterboxdIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#00D735">
    <path d="M8.224 14.352a4.447 4.447 0 0 1-3.775 2.092C1.992 16.444 0 14.454 0 12s1.992-4.444 4.45-4.444c1.592 0 2.988.836 3.774 2.092-.483.74-.764 1.622-.764 2.572s.281 1.834.764 2.572zm3.553-.88a4.426 4.426 0 0 0 0-2.944A4.426 4.426 0 0 0 11.777 12c0 .523.09 1.025.257 1.492a4.426 4.426 0 0 0-.257 1.488c0 .523.09 1.025.257 1.492a4.447 4.447 0 0 1-3.81-4.472c0-1.852 1.13-3.441 2.737-4.12a4.447 4.447 0 0 1 3.775 2.092 4.432 4.432 0 0 1 .764 2.028zm3.775 2.972a4.447 4.447 0 0 1-3.775-2.092c.483-.74.764-1.622.764-2.572s-.281-1.834-.764-2.572a4.447 4.447 0 0 1 3.775-2.092C19.008 7.116 21 9.106 21 11.56s-1.992 4.444-4.45 4.444z"/>
  </svg>
);

const TumblrIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#36465D">
    <path d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.167z"/>
  </svg>
);

const VSCOIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M12 0C5.376 0 0 5.376 0 12s5.376 12 12 12 12-5.376 12-12S18.624 0 12 0zm0 2.592a9.408 9.408 0 110 18.816 9.408 9.408 0 010-18.816zm0 1.56a7.848 7.848 0 100 15.696 7.848 7.848 0 000-15.696zm0 1.896a5.952 5.952 0 110 11.904 5.952 5.952 0 010-11.904zm0 1.776a4.176 4.176 0 100 8.352 4.176 4.176 0 000-8.352z"/>
  </svg>
);

const OnlyfansIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#00AFF0">
    <path d="M12 0C5.373 0 0 5.373 0 12c0 6.627 5.373 12 12 12s12-5.373 12-12c0-6.627-5.373-12-12-12zm0 3.6a8.4 8.4 0 110 16.8 8.4 8.4 0 010-16.8zm0 2.133a6.267 6.267 0 100 12.534 6.267 6.267 0 000-12.534zm0 2.4a3.867 3.867 0 110 7.734 3.867 3.867 0 010-7.734z"/>
  </svg>
);

const BlueskyIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#0085FF">
    <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 01-.415-.056c.14.017.279.036.415.056 2.67.296 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"/>
  </svg>
);

const ThreadsIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.69-1.685-1.74-1.752-2.96-.065-1.182.408-2.256 1.33-3.022.88-.73 2.082-1.146 3.48-1.206l.005-.001c1.077-.042 2.088.042 3.046.254l.022.006c-.02-.986-.262-1.236-.29-1.264a.89.89 0 00-.025-.023c-.233-.19-.727-.396-1.57-.396h-.004c-1.174.003-2.08.473-2.54.828l-1.378-1.652c.757-.587 2.158-1.292 3.918-1.295h.008c1.238 0 2.2.331 2.861.984.648.64 1.017 1.548 1.096 2.702.577.237 1.086.524 1.525.857.67.51 1.18 1.134 1.513 1.857.677 1.467.808 4.023-1.248 6.037-1.782 1.746-4.013 2.593-7.024 2.62zm-.535-8.185c-1.637.083-2.378.738-2.423 1.538-.034.6.253 1.063.788 1.412.56.364 1.28.527 2.006.488 1.065-.058 1.86-.46 2.365-1.2.343-.503.58-1.168.696-1.956a8.717 8.717 0 00-1.325-.233 10.022 10.022 0 00-2.107-.049z"/>
  </svg>
);

const RobloxIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#000000">
    <path d="M5.164 0L0 18.627 18.836 24 24 5.373 5.164 0zM14.6 15.549l-5.61-1.377 1.377-5.61 5.61 1.377-1.377 5.61z"/>
  </svg>
);

const PatreonIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#FF424D">
    <path d="M0 .48v23.04h4.22V.48zm15.385 0c-4.764 0-8.641 3.88-8.641 8.65 0 4.755 3.877 8.623 8.641 8.623 4.75 0 8.615-3.868 8.615-8.623C24 4.36 20.136.48 15.385.48z"/>
  </svg>
);

const PrivacyIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#00FF00">
    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
  </svg>
);

const FivemIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#F40552">
    <path d="M4.717 0h8.565A4.716 4.716 0 0118 4.717v8.565A4.717 4.717 0 0113.283 18H4.717A4.717 4.717 0 010 13.282V4.717A4.717 4.717 0 014.717 0zm.02 2.835c-1.05 0-1.901.851-1.901 1.9v8.507c0 1.05.851 1.9 1.9 1.9h8.507c1.05 0 1.9-.85 1.9-1.9V4.735c0-1.049-.85-1.9-1.9-1.9H4.737zm5.888 6.79L8.14 5.672a.96.96 0 00-1.66 0l-2.483 3.953a.957.957 0 00.83 1.436h4.965a.958.958 0 00.83-1.436z"/>
  </svg>
);

const IFoodIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#EA1D2C">
    <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm.6 18.893c-3.445 0-6.24-2.795-6.24-6.24s2.795-6.24 6.24-6.24c2.107 0 3.969 1.047 5.096 2.648l-2.247 1.297a3.449 3.449 0 00-2.849-1.497c-1.913 0-3.465 1.552-3.465 3.465s1.552 3.465 3.465 3.465c1.465 0 2.715-.91 3.22-2.195h-3.22v-2.595h6.12c.06.33.092.671.092 1.021 0 3.445-2.795 6.871-6.212 6.871z"/>
  </svg>
);

const GmailIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5">
    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
  </svg>
);

const NameMCIcon = () => (
  <svg viewBox="0 0 24 24" className="w-5 h-5" fill="#3C8527">
    <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 4.8c1.327 0 2.4 1.073 2.4 2.4v2.4H9.6V7.2c0-1.327 1.073-2.4 2.4-2.4zm4.8 7.2v7.2H7.2V12h9.6z"/>
  </svg>
);

const SOCIAL_NETWORKS: SocialNetwork[] = [
  { id: "instagram", name: "Instagram", icon: <InstagramIcon />, color: "#E4405F", placeholder: "https://instagram.com/seuusuario" },
  { id: "snapchat", name: "Snapchat", icon: <SnapchatIcon />, color: "#FFFC00", placeholder: "https://snapchat.com/add/seuusuario" },
  { id: "youtube", name: "YouTube", icon: <YouTubeIcon />, color: "#FF0000", placeholder: "https://youtube.com/@seucanal" },
  { id: "discord", name: "Discord", icon: <DiscordIcon />, color: "#5865F2", placeholder: "https://discord.gg/seuservidor" },
  { id: "facebook", name: "Facebook", icon: <FacebookIcon />, color: "#1877F2", placeholder: "https://facebook.com/seuusuario" },
  { id: "twitter", name: "Twitter", icon: <TwitterIcon />, color: "#000000", placeholder: "https://twitter.com/seuusuario" },
  { id: "tiktok", name: "TikTok", icon: <TikTokIcon />, color: "#000000", placeholder: "https://tiktok.com/@seuusuario" },
  { id: "lastfm", name: "Last.fm", icon: <LastFmIcon />, color: "#D51007", placeholder: "https://last.fm/user/seuusuario" },
  { id: "steam", name: "Steam", icon: <SteamIcon />, color: "#000000", placeholder: "https://steamcommunity.com/id/seuusuario" },
  { id: "github", name: "GitHub", icon: <GitHubIcon />, color: "#181717", placeholder: "https://github.com/seuusuario" },
  { id: "spotify", name: "Spotify", icon: <SpotifyIcon />, color: "#1DB954", placeholder: "https://open.spotify.com/user/seuusuario" },
  { id: "twitch", name: "Twitch", icon: <TwitchIcon />, color: "#9146FF", placeholder: "https://twitch.tv/seuusuario" },
  { id: "soundcloud", name: "Soundcloud", icon: <SoundcloudIcon />, color: "#FF5500", placeholder: "https://soundcloud.com/seuusuario" },
  { id: "whatsapp", name: "Whatsapp", icon: <WhatsappIcon />, color: "#25D366", placeholder: "https://wa.me/5511999999999" },
  { id: "telegram", name: "Telegram", icon: <TelegramIcon />, color: "#26A5E4", placeholder: "https://t.me/seuusuario" },
  { id: "battlenet", name: "BattleNet", icon: <BattleNetIcon />, color: "#00AEFF", placeholder: "Usuario#1234" },
  { id: "linkedin", name: "Linkedin", icon: <LinkedinIcon />, color: "#0A66C2", placeholder: "https://linkedin.com/in/seuusuario" },
  { id: "paypal", name: "PayPal", icon: <PayPalIcon />, color: "#003087", placeholder: "https://paypal.me/seuusuario" },
  { id: "xbox", name: "Xbox", icon: <XboxIcon />, color: "#107C10", placeholder: "Sua Gamertag" },
  { id: "pinterest", name: "Pinterest", icon: <PinterestIcon />, color: "#BD081C", placeholder: "https://pinterest.com/seuusuario" },
  { id: "letterboxd", name: "Letterboxd", icon: <LetterboxdIcon />, color: "#00D735", placeholder: "https://letterboxd.com/seuusuario" },
  { id: "tumblr", name: "Tumblr", icon: <TumblrIcon />, color: "#36465D", placeholder: "https://seuusuario.tumblr.com" },
  { id: "vsco", name: "VSCO", icon: <VSCOIcon />, color: "#000000", placeholder: "https://vsco.co/seuusuario" },
  { id: "onlyfans", name: "Onlyfans", icon: <OnlyfansIcon />, color: "#00AFF0", placeholder: "https://onlyfans.com/seuusuario" },
  { id: "bluesky", name: "Bluesky", icon: <BlueskyIcon />, color: "#0085FF", placeholder: "https://bsky.app/profile/seuusuario" },
  { id: "threads", name: "Threads", icon: <ThreadsIcon />, color: "#000000", placeholder: "https://threads.net/@seuusuario" },
  { id: "roblox", name: "Roblox", icon: <RobloxIcon />, color: "#000000", placeholder: "https://roblox.com/users/seuusuario" },
  { id: "patreon", name: "Patreon", icon: <PatreonIcon />, color: "#FF424D", placeholder: "https://patreon.com/seuusuario" },
  { id: "privacy", name: "Privacy", icon: <PrivacyIcon />, color: "#00FF00", placeholder: "https://privacy.com.br/seuusuario" },
  { id: "fivem", name: "Fivem", icon: <FivemIcon />, color: "#F40552", placeholder: "cfx.re/join/..." },
  { id: "ifood", name: "iFood", icon: <IFoodIcon />, color: "#EA1D2C", placeholder: "https://ifood.com.br/seurestaurante" },
  { id: "gmail", name: "Gmail", icon: <GmailIcon />, color: "#EA4335", placeholder: "seuemail@gmail.com" },
  { id: "namemc", name: "NameMC", icon: <NameMCIcon />, color: "#3C8527", placeholder: "https://namemc.com/profile/seuusuario" },
];

// ═══════════════════════════════════════════════════════════
// COMPONENTES BASE (seus componentes existentes)
// ═══════════════════════════════════════════════════════════

const Modal = ({ isOpen, onClose, title, children }: {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  children: React.ReactNode;
}) => (
  <AnimatePresence>
    {isOpen && (
      <>
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          onClick={onClose}
          className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50"
        />
        <motion.div
          initial={{ opacity: 0, scale: 0.95, y: 20 }}
          animate={{ opacity: 1, scale: 1, y: 0 }}
          exit={{ opacity: 0, scale: 0.95, y: 20 }}
          transition={{ type: "spring", damping: 25, stiffness: 300 }}
          className="fixed inset-0 z-50 flex items-center justify-center p-4"
        >
          <div className="w-full max-w-md bg-[var(--color-background)] backdrop-blur-[var(--blur-amount)] border border-[var(--color-border)] rounded-[var(--border-radius-xl)] shadow-2xl overflow-hidden">
            <div className="flex items-center justify-between p-4 sm:p-6 border-b border-[var(--color-border)]">
              <h2 className="text-lg sm:text-xl font-semibold text-[var(--color-text)]">{title}</h2>
              <motion.button
                onClick={onClose}
                className="p-2 rounded-full bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] text-[var(--color-text-muted)] hover:text-[var(--color-text)] transition-all"
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
              >
                <X size={18} />
              </motion.button>
            </div>
            <div className="p-4 sm:p-6">{children}</div>
          </div>
        </motion.div>
      </>
    )}
  </AnimatePresence>
);

const SettingsCard = ({ children, className = "" }: {
  children: React.ReactNode;
  className?: string;
}) => (
  <motion.div
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    className={`bg-[var(--card-background-glass)] backdrop-blur-[var(--blur-amount)] border border-[var(--color-border)] rounded-[var(--border-radius-lg)] p-4 sm:p-6 ${className}`}
  >
    {children}
  </motion.div>
);

const SectionHeader = ({ icon: Icon, title, description, action }: {
  icon: React.ElementType;
  title: string;
  description: string;
  action?: React.ReactNode;
}) => (
  <div className="flex flex-col sm:flex-row sm:items-start justify-between gap-4 mb-4 sm:mb-6">
    <div className="flex items-start gap-3 sm:gap-4">
      <div className="p-2 sm:p-3 rounded-[var(--border-radius-md)] bg-[var(--color-primary)]/10 flex-shrink-0">
        <Icon size={20} className="sm:w-6 sm:h-6 text-[var(--color-primary)]" />
      </div>
      <div className="min-w-0">
        <h2 className="text-base sm:text-lg font-semibold text-[var(--color-text)]">{title}</h2>
        <p className="text-xs sm:text-sm text-[var(--color-text-muted)] mt-0.5 sm:mt-1">{description}</p>
      </div>
    </div>
    {action}
  </div>
);

const SocialNetworkButton = ({ network, onClick, isAdded }: {
  network: SocialNetwork;
  onClick: () => void;
  isAdded: boolean;
}) => (
  <motion.button
    onClick={onClick}
    className={`relative flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-[var(--border-radius-md)] border transition-all duration-300 ${
      isAdded
        ? "border-green-500/50 bg-green-500/10"
        : "border-[var(--color-border)] bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] hover:border-[var(--color-primary)]/50"
    }`}
    whileHover={{ scale: 1.05, y: -2 }}
    whileTap={{ scale: 0.95 }}
  >
    {isAdded && (
      <div className="absolute top-1 right-1">
        <CheckCircle size={12} className="text-green-400" />
      </div>
    )}
    <div className="w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center">
      {network.icon}
    </div>
    <span className="text-[10px] sm:text-xs font-medium text-[var(--color-text)] text-center leading-tight">
      {network.name}
    </span>
  </motion.button>
);

const UserSocialCard = ({ userNetwork, network, onEdit, onDelete, disabled }: {
  userNetwork: UserSocialNetwork;
  network: SocialNetwork;
  onEdit: () => void;
  onDelete: () => void;
  disabled: boolean;
}) => {
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(userNetwork.url);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <motion.div
      layout
      initial={{ opacity: 0, scale: 0.9 }}
      animate={{ opacity: 1, scale: 1 }}
      exit={{ opacity: 0, scale: 0.9 }}
      className={`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-[var(--border-radius-md)] border border-[var(--color-border)] bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] transition-all duration-300 group ${
        disabled ? "opacity-50 pointer-events-none" : ""
      }`}
    >
      <div className="cursor-grab text-[var(--color-text-muted)] opacity-0 group-hover:opacity-100 transition-opacity">
        <GripVertical size={16} />
      </div>

      <div className="w-10 h-10 flex items-center justify-center rounded-[var(--border-radius-sm)] bg-[var(--color-background)] flex-shrink-0">
        {network.icon}
      </div>

      <div className="flex-1 min-w-0">
        <h3 className="text-sm font-medium text-[var(--color-text)]">{network.name}</h3>
        <p className="text-xs text-[var(--color-text-muted)] truncate">{userNetwork.url}</p>
      </div>

      <div className="flex items-center gap-2">
        <motion.button
          onClick={handleCopy}
          disabled={disabled}
          className="p-2 rounded-full bg-[var(--color-background)] hover:bg-[var(--color-primary)]/20 text-[var(--color-text-muted)] hover:text-[var(--color-primary)] transition-all"
          whileHover={{ scale: 1.1 }}
          whileTap={{ scale: 0.9 }}
          title="Copiar link"
        >
          {copied ? <Check size={14} className="text-green-400" /> : <Copy size={14} />}
        </motion.button>

        <motion.button
          onClick={() => window.open(userNetwork.url, "_blank")}
          className="p-2 rounded-full bg-[var(--color-background)] hover:bg-[var(--color-primary)]/20 text-[var(--color-text-muted)] hover:text-[var(--color-primary)] transition-all"
          whileHover={{ scale: 1.1 }}
          whileTap={{ scale: 0.9 }}
        >
          <ExternalLink size={14} />
        </motion.button>

        <motion.button
          onClick={onEdit}
          disabled={disabled}
          className="p-2 rounded-full bg-[var(--color-background)] hover:bg-[var(--color-primary)]/20 text-[var(--color-text-muted)] hover:text-[var(--color-primary)] transition-all"
          whileHover={{ scale: 1.1 }}
          whileTap={{ scale: 0.9 }}
        >
          <Edit3 size={14} />
        </motion.button>

        <motion.button
          onClick={onDelete}
          disabled={disabled}
          className="p-2 rounded-full bg-[var(--color-background)] hover:bg-red-500/20 text-[var(--color-text-muted)] hover:text-red-400 transition-all"
          whileHover={{ scale: 1.1 }}
          whileTap={{ scale: 0.9 }}
        >
          <Trash2 size={14} />
        </motion.button>
      </div>
    </motion.div>
  );
};

const EmptyState = () => (
  <motion.div
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    className="flex flex-col items-center justify-center py-12 sm:py-16"
  >
    <div className="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-[var(--color-surface)] flex items-center justify-center mb-4">
      <Share2 size={28} className="sm:w-8 sm:h-8 text-[var(--color-text-muted)]" />
    </div>
    <h3 className="text-base sm:text-lg font-semibold text-[var(--color-text)] mb-2">
      Nenhuma rede social adicionada
    </h3>
    <p className="text-xs sm:text-sm text-[var(--color-text-muted)] text-center max-w-xs">
      Você não possui redes sociais atualmente, adicione sua primeira!
    </p>
  </motion.div>
);

const LoadingSkeleton = () => (
  <div className="space-y-3 animate-pulse">
    {[1, 2, 3].map((i) => (
      <div
        key={i}
        className="h-16 bg-[var(--color-surface)] rounded-[var(--border-radius-md)] border border-[var(--color-border)]"
      />
    ))}
  </div>
);

// ═══════════════════════════════════════════════════════════
// ALERTA: Link Genérico Detectado
// ═══════════════════════════════════════════════════════════

const NonSocialAlert = () => (
  <motion.div
    initial={{ opacity: 0, y: -10 }}
    animate={{ opacity: 1, y: 0 }}
    exit={{ opacity: 0, y: -10 }}
    className="flex flex-col gap-3 p-4 rounded-[var(--border-radius-md)] bg-amber-500/10 border border-amber-500/30"
  >
    <div className="flex items-start gap-3">
      <AlertCircle size={20} className="text-amber-400 flex-shrink-0 mt-0.5" />
      <div className="flex-1">
        <p className="text-sm font-medium text-[var(--color-text)]">
          Link genérico detectado
        </p>
        <p className="text-xs text-[var(--color-text-muted)] mt-1">
          Este link não pertence a uma rede social predefinida. Para adicionar links genéricos,
          use a seção de <span className="font-semibold text-amber-400">Links</span>.
        </p>
      </div>
    </div>
    <motion.button
      onClick={() => (window.location.href = "/dashboard/links")}
      className="w-full px-4 py-2.5 rounded-[var(--border-radius-md)] bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 font-medium text-sm transition-all duration-300 flex items-center justify-center gap-2 border border-amber-500/30"
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
    >
      <LinkIcon size={16} />
      Ir para Links
    </motion.button>
  </motion.div>
);

// ═══════════════════════════════════════════════════════════
// COMPONENTE PRINCIPAL
// ═══════════════════════════════════════════════════════════

const DashboardSocial = () => {
  // Estados
  const [socialNetworks, setSocialNetworks] = useState<UserSocialNetwork[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [successMessage, setSuccessMessage] = useState("");

  // Modal
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [selectedNetwork, setSelectedNetwork] = useState<SocialNetwork | null>(null);
  const [networkUrl, setNetworkUrl] = useState("");
  const [editingNetwork, setEditingNetwork] = useState<UserSocialNetwork | null>(null);
  const [formErrors, setFormErrors] = useState<Record<string, string>>({});
  const [detectedNonSocial, setDetectedNonSocial] = useState(false);

  // Modal Delete
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);
  const [deletingNetwork, setDeletingNetwork] = useState<UserSocialNetwork | null>(null);

  // ═══════════════════════════════════════════════════════════
  // TRANSFORMAÇÃO DE DADOS
  // ═══════════════════════════════════════════════════════════

  const transformToUserSocial = (linkResponse: UserLinkResponse): UserSocialNetwork | null => {
    const socialConfig = detectSocialNetwork(linkResponse.url);
    if (!socialConfig) return null;

    return {
      id: linkResponse.linkId,
      networkId: socialConfig.id,
      url: linkResponse.url,
    };
  };

  // ═══════════════════════════════════════════════════════════
  // CARREGAR REDES SOCIAIS
  // ═══════════════════════════════════════════════════════════

  const loadSocialNetworks = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const response = await linkService.getUserLinks();

      // Filtrar apenas redes sociais
      const socials = response.links
        .map(transformToUserSocial)
        .filter((item): item is UserSocialNetwork => item !== null);

      setSocialNetworks(socials);
    } catch (err: any) {
      console.error("Erro ao carregar redes sociais:", err);
      if (err.response?.status === 401) {
        setError("Sessão expirada. Faça login novamente.");
      } else {
        setError("Erro ao carregar suas redes sociais. Tente novamente.");
      }
    } finally {
      setIsLoading(false);
    }
  }, []);

  useEffect(() => {
    loadSocialNetworks();
  }, [loadSocialNetworks]);

  // ═══════════════════════════════════════════════════════════
  // HANDLERS
  // ═══════════════════════════════════════════════════════════

  const handleNetworkClick = (network: SocialNetwork) => {
    const existing = socialNetworks.find((sn) => sn.networkId === network.id);

    if (existing) {
      setEditingNetwork(existing);
      setNetworkUrl(existing.url);
    } else {
      setEditingNetwork(null);
      setNetworkUrl("");
    }

    setSelectedNetwork(network);
    setFormErrors({});
    setDetectedNonSocial(false);
    setIsModalOpen(true);
  };

  const handleUrlChange = (value: string) => {
    setNetworkUrl(value);
    setFormErrors({});

    if (value.trim() && isValidUrl(value)) {
      // Verificar se é uma rede social predefinida
      if (!isSocialNetworkUrl(value)) {
        setDetectedNonSocial(true);
      } else {
        setDetectedNonSocial(false);
      }
    } else {
      setDetectedNonSocial(false);
    }
  };

  const handleSubmit = async () => {
    if (!selectedNetwork) return;

    setFormErrors({});
    setError(null);

    const errors: Record<string, string> = {};

    if (!networkUrl.trim()) {
      errors.url = "Digite o link ou usuário da rede social";
      setFormErrors(errors);
      return;
    }

    if (!isValidUrl(networkUrl)) {
      errors.url = "URL inválida";
      setFormErrors(errors);
      return;
    }

    // Verificar se é realmente uma rede social
    const detectedConfig = detectSocialNetwork(networkUrl);
    if (!detectedConfig) {
      errors.url = "Este link não pertence a uma rede social predefinida. Use a seção de Links.";
      setFormErrors(errors);
      setDetectedNonSocial(true);
      return;
    }

    // Verificar se a URL corresponde à rede social selecionada
    if (detectedConfig.id !== selectedNetwork.id) {
      errors.url = `Este link pertence ao ${detectedConfig.name}, não ao ${selectedNetwork.name}`;
      setFormErrors(errors);
      return;
    }

    setIsSubmitting(true);

    try {
      const normalized = normalizeUrl(networkUrl.trim());
      const typeId = detectedConfig.typeId; // ✅ Pega o typeId específico da rede

      if (editingNetwork) {
        // Atualizar - passa o typeId correto
        await linkService.updateLink(editingNetwork.id, normalized, typeId);

        setSocialNetworks((prev) =>
          prev.map((sn) => (sn.id === editingNetwork.id ? { ...sn, url: normalized } : sn))
        );

        setSuccessMessage("Rede social atualizada!");
      } else {
        // Adicionar - passa o typeId correto
        await linkService.addLink(normalized, typeId);
        await loadSocialNetworks();
        setSuccessMessage("Rede social adicionada!");
      }

      setTimeout(() => {
        setIsModalOpen(false);
        setSelectedNetwork(null);
        setNetworkUrl("");
        setEditingNetwork(null);
        setSuccessMessage("");
        setDetectedNonSocial(false);
      }, 1500);
    } catch (err: any) {
      console.error("Erro ao salvar rede social:", err);

      if (err.response?.status === 400) {
        setFormErrors({ url: err.response.data?.message || "URL inválida" });
      } else if (err.response?.status === 409) {
        setFormErrors({ url: "Esta rede social já foi adicionada" });
      } else {
        setError(err.response?.data?.message || "Erro ao salvar. Tente novamente.");
      }
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleDelete = (network: UserSocialNetwork) => {
    setDeletingNetwork(network);
    setIsDeleteModalOpen(true);
  };

  const confirmDelete = async () => {
    if (!deletingNetwork) return;

    setIsSubmitting(true);

    try {
      await linkService.deleteLink(deletingNetwork.id);

      setSocialNetworks((prev) => prev.filter((sn) => sn.id !== deletingNetwork.id));

      setIsDeleteModalOpen(false);
      setDeletingNetwork(null);
    } catch (err: any) {
      console.error("Erro ao deletar rede social:", err);
      setError(err.response?.data?.message || "Erro ao excluir. Tente novamente.");
      setIsDeleteModalOpen(false);
      setDeletingNetwork(null);
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleCloseModal = () => {
    setIsModalOpen(false);
    setSelectedNetwork(null);
    setNetworkUrl("");
    setEditingNetwork(null);
    setFormErrors({});
    setSuccessMessage("");
    setDetectedNonSocial(false);
  };

  const isNetworkAdded = (networkId: string) => {
    return socialNetworks.some((sn) => sn.networkId === networkId);
  };

  const getNetworkById = (networkId: string) => {
    return SOCIAL_NETWORKS.find((n) => n.id === networkId);
  };

  // ═══════════════════════════════════════════════════════════
  // RENDER
  // ═══════════════════════════════════════════════════════════

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: { staggerChildren: 0.1 },
    },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0 },
  };

  return (
    <div className="min-h-screen bg-[var(--color-background)] pb-8">
      {/* Page Header */}
      <div className="mb-6 sm:mb-8">
        <motion.div
          initial={{ opacity: 0, y: -20 }}
          animate={{ opacity: 1, y: 0 }}
          className="flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-[var(--color-text-muted)] mb-3 sm:mb-4 overflow-x-auto whitespace-nowrap pb-2"
        >
          <span>Dashboard</span>
          <ChevronRight size={12} className="sm:w-[14px] sm:h-[14px] flex-shrink-0" />
          <span>Ver Perfil</span>
          <ChevronRight size={12} className="sm:w-[14px] sm:h-[14px] flex-shrink-0" />
          <span className="text-[var(--color-text)]">Redes Sociais</span>
        </motion.div>

        <motion.div
          initial={{ opacity: 0, y: -10 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.1 }}
        >
          <h1 className="text-xl sm:text-2xl lg:text-3xl font-bold text-[var(--color-text)] flex items-center gap-2 sm:gap-3">
            <Share2 className="text-[var(--color-primary)] w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8" />
            Redes Sociais
          </h1>
          <p className="text-xs sm:text-sm lg:text-base text-[var(--color-text-muted)] mt-1 sm:mt-2">
            Exiba as suas redes sociais mais importantes em seu perfil.
          </p>
        </motion.div>
      </div>

      {/* Error Message Global */}
      <AnimatePresence>
        {error && (
          <motion.div
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -10 }}
            className="mb-6 p-4 rounded-[var(--border-radius-md)] bg-red-500/10 border border-red-500/30 flex items-center gap-3"
          >
            <AlertCircle size={20} className="text-red-400 flex-shrink-0" />
            <span className="text-sm text-red-400 flex-1">{error}</span>
            <button
              onClick={() => setError(null)}
              className="p-1 rounded-full hover:bg-red-500/20 text-red-400"
            >
              <X size={16} />
            </button>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Content Grid */}
      <motion.div
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6"
      >
        {/* Redes Sociais Disponíveis */}
        <motion.div variants={itemVariants} className="xl:col-span-1">
          <SettingsCard>
            <SectionHeader
              icon={Share2}
              title="Redes Sociais"
              description="Divulgue todas as suas redes sociais diretamente em seu perfil da Vxo."
            />

            <div className="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-5 xl:grid-cols-4 gap-2 sm:gap-3">
              {SOCIAL_NETWORKS.map((network) => (
                <SocialNetworkButton
                  key={network.id}
                  network={network}
                  onClick={() => handleNetworkClick(network)}
                  isAdded={isNetworkAdded(network.id)}
                />
              ))}
            </div>
          </SettingsCard>
        </motion.div>

        {/* Suas Redes */}
        <motion.div variants={itemVariants} className="xl:col-span-1">
          <SettingsCard>
            <SectionHeader
              icon={LinkIcon}
              title="Suas Redes"
              description="Gerencie suas Redes exibidas no perfil."
              action={
                <motion.button
                  onClick={loadSocialNetworks}
                  disabled={isLoading}
                  className="p-2 rounded-[var(--border-radius-sm)] bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] text-[var(--color-text-muted)] transition-colors disabled:opacity-50"
                  whileHover={{ scale: 1.1 }}
                  whileTap={{ scale: 0.9 }}
                  title="Recarregar redes"
                >
                  <RefreshCw size={16} className={isLoading ? "animate-spin" : ""} />
                </motion.button>
              }
            />

            {isLoading ? (
              <LoadingSkeleton />
            ) : socialNetworks.length === 0 ? (
              <EmptyState />
            ) : (
              <div className="space-y-3">
                <AnimatePresence mode="popLayout">
                  {socialNetworks.map((userNetwork) => {
                    const network = getNetworkById(userNetwork.networkId);
                    if (!network) return null;

                    return (
                      <UserSocialCard
                        key={userNetwork.id}
                        userNetwork={userNetwork}
                        network={network}
                        onEdit={() => handleNetworkClick(network)}
                        onDelete={() => handleDelete(userNetwork)}
                        disabled={isSubmitting}
                      />
                    );
                  })}
                </AnimatePresence>
              </div>
            )}

            {!isLoading && socialNetworks.length > 0 && (
              <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="mt-4 pt-4 border-t border-[var(--color-border)]"
              >
                <p className="text-xs text-[var(--color-text-muted)] flex items-center gap-2">
                  <GripVertical size={12} />
                  Arraste para reordenar suas redes sociais
                </p>
              </motion.div>
            )}
          </SettingsCard>
        </motion.div>
      </motion.div>

      {/* Modal: Adicionar/Editar Rede Social */}
      <Modal
        isOpen={isModalOpen}
        onClose={handleCloseModal}
        title={
          editingNetwork
            ? `Editar ${selectedNetwork?.name}`
            : `Adicionar ${selectedNetwork?.name}`
        }
      >
        {successMessage ? (
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            className="flex flex-col items-center justify-center py-8"
          >
            <div className="w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4">
              <CheckCircle size={32} className="text-green-400" />
            </div>
            <p className="text-lg font-semibold text-[var(--color-text)]">{successMessage}</p>
          </motion.div>
        ) : (
          <div className="space-y-4">
            {selectedNetwork && (
              <div className="flex items-center gap-4 p-4 rounded-[var(--border-radius-md)] bg-[var(--color-surface)]">
                <div className="w-12 h-12 flex items-center justify-center rounded-[var(--border-radius-sm)] bg-[var(--color-background)]">
                  {selectedNetwork.icon}
                </div>
                <div>
                  <h3 className="text-sm font-medium text-[var(--color-text)]">
                    {selectedNetwork.name}
                  </h3>
                  <p className="text-xs text-[var(--color-text-muted)]">
                    {editingNetwork ? "Atualize o link abaixo" : "Adicione o link ou usuário"}
                  </p>
                </div>
              </div>
            )}

            <div className="space-y-2">
              <label className="text-sm font-medium text-[var(--color-text)]">
                Link ou Usuário
              </label>
              <div className="relative">
                <div className="absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-text-muted)]">
                  <LinkIcon size={18} />
                </div>
                <input
                  type="text"
                  placeholder={selectedNetwork?.placeholder}
                  value={networkUrl}
                  onChange={(e) => handleUrlChange(e.target.value)}
                  disabled={isSubmitting}
                  className={`w-full px-4 py-3 pl-10 rounded-[var(--border-radius-md)] bg-[var(--color-surface)] border transition-all duration-300 text-[var(--color-text)] placeholder-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 ${
                    formErrors.url
                      ? "border-red-500/50 focus:border-red-500"
                      : "border-[var(--color-border)] focus:border-[var(--color-primary)]"
                  }`}
                />
              </div>
              {formErrors.url && (
                <p className="text-xs text-red-400 flex items-center gap-1">
                  <AlertCircle size={12} />
                  {formErrors.url}
                </p>
              )}
            </div>

            {/* Alerta de link não-social */}
            <AnimatePresence>{detectedNonSocial && <NonSocialAlert />}</AnimatePresence>

            <div className="flex flex-col-reverse sm:flex-row gap-3 pt-4">
              <motion.button
                onClick={handleCloseModal}
                disabled={isSubmitting}
                className="flex-1 px-4 py-2.5 rounded-[var(--border-radius-md)] bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] text-[var(--color-text)] font-medium transition-all disabled:opacity-50"
                whileHover={{ scale: 1.02 }}
                whileTap={{ scale: 0.98 }}
              >
                Cancelar
              </motion.button>
              <motion.button
                onClick={handleSubmit}
                disabled={isSubmitting || !networkUrl.trim() || detectedNonSocial}
                className="flex-1 px-4 py-2.5 rounded-[var(--border-radius-md)] bg-[var(--color-primary)] hover:bg-[var(--color-primary-dark)] text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                whileHover={isSubmitting || detectedNonSocial ? {} : { scale: 1.02 }}
                whileTap={isSubmitting || detectedNonSocial ? {} : { scale: 0.98 }}
              >
                {isSubmitting ? (
                  <>
                    <Loader2 size={16} className="animate-spin" />
                    {editingNetwork ? "Atualizando..." : "Adicionando..."}
                  </>
                ) : (
                  <>
                    {editingNetwork ? <Edit3 size={16} /> : <Plus size={16} />}
                    {editingNetwork ? "Atualizar" : "Adicionar"}
                  </>
                )}
              </motion.button>
            </div>
          </div>
        )}
      </Modal>

      {/* Modal: Confirmar Exclusão */}
      <Modal
        isOpen={isDeleteModalOpen}
        onClose={() => {
          setIsDeleteModalOpen(false);
          setDeletingNetwork(null);
        }}
        title="Excluir Rede Social"
      >
        <div className="space-y-4">
          <div className="flex items-start gap-3 p-4 rounded-[var(--border-radius-md)] bg-red-500/10 border border-red-500/30">
            <AlertCircle size={20} className="text-red-400 flex-shrink-0 mt-0.5" />
            <div>
              <p className="text-sm text-[var(--color-text)]">
                Tem certeza que deseja excluir esta rede social?
              </p>
              <p className="text-xs text-[var(--color-text-muted)] mt-1">
                Esta ação não pode ser desfeita.
              </p>
            </div>
          </div>

          {deletingNetwork && (
            <div className="flex items-center gap-3 p-3 rounded-[var(--border-radius-sm)] bg-[var(--color-surface)] border border-[var(--color-border)]">
              <div className="w-10 h-10 flex items-center justify-center rounded bg-[var(--color-background)]">
                {getNetworkById(deletingNetwork.networkId)?.icon}
              </div>
              <div className="flex-1 min-w-0">
                <p className="text-sm font-medium text-[var(--color-text)]">
                  {getNetworkById(deletingNetwork.networkId)?.name}
                </p>
                <p className="text-xs text-[var(--color-text-muted)] truncate">
                  {deletingNetwork.url}
                </p>
              </div>
            </div>
          )}

          <div className="flex flex-col-reverse sm:flex-row gap-3 pt-2">
            <motion.button
              onClick={() => {
                setIsDeleteModalOpen(false);
                setDeletingNetwork(null);
              }}
              disabled={isSubmitting}
              className="flex-1 px-4 py-2.5 rounded-[var(--border-radius-md)] bg-[var(--color-surface)] hover:bg-[var(--color-surface-hover)] text-[var(--color-text)] font-medium transition-all disabled:opacity-50"
              whileHover={{ scale: 1.02 }}
              whileTap={{ scale: 0.98 }}
            >
              Cancelar
            </motion.button>
            <motion.button
              onClick={confirmDelete}
              disabled={isSubmitting}
              className="flex-1 px-4 py-2.5 rounded-[var(--border-radius-md)] bg-red-500 hover:bg-red-600 text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
              whileHover={isSubmitting ? {} : { scale: 1.02 }}
              whileTap={isSubmitting ? {} : { scale: 0.98 }}
            >
              {isSubmitting ? (
                <>
                  <Loader2 size={16} className="animate-spin" />
                  Excluindo...
                </>
              ) : (
                <>
                  <Trash2 size={16} />
                  Excluir Rede
                </>
              )}
            </motion.button>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default DashboardSocial;